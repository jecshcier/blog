---
title: ä¸€ä¸ªå…³äºgitment.js:16çš„é”™è¯¯
categories: ä¿®bug
date: 2017-10-01 22:55:55
tags: [hexo]
keywords: [gitment,hexo,next]
---


ç”¨gitmentåšhexoçš„è¯„è®ºåŠŸèƒ½çš„æ—¶å€™ï¼ŒæŒ‰ç…§ç½‘ä¸Šæ¥çš„æ•™ç¨‹ï¼ŒåŸºæœ¬okï¼Œä½†ä¼¼ä¹æœ‰é‚£ä¹ˆä¸€ç‚¹é—®é¢˜ã€‚

æ‰“å¼€ä¸»é¡µï¼Œå®ƒç»™æˆ‘æŠ¥äº†è¿™ä¹ˆä¸ªé”™ã€‚ã€‚

![bug](http://www.cshayne.cn/images/10-1.png)

<!---more--->

æ‰“å¼€f12è°ƒè¯•äº†ä¸€ä¸‹å‘ç°ï¼Œé—®é¢˜å¤§æ¦‚æ˜¯å‡ºåœ¨`gitment.swig`è¿™ä¸ªæ–‡ä»¶ä¸Šã€‚
ä»£ç å¦‚ä¸‹

```
{% if not theme.gitment.lazy %}
       <script type="text/javascript">
           var gitment = new Gitment({
               id: window.location.pathname, 
               owner: '{{owner}}',
               repo: '{{repo}}',
               oauth: {
                   client_id: '{{cid}}',
                   client_secret: '{{cs}}',
               }});
           gitment.render('gitment-container');
       </script>
   {% else %}
       <script type="text/javascript">
           function ShowGitment(){
               document.getElementById("gitment-display-button").style.display = "none";
               document.getElementById("gitment-container").style.display = "block";
               var gitment = new Gitment({
                   id: window.location.pathname, 
                   owner: '{{owner}}',
                   repo: '{{repo}}',
                   oauth: {
                       client_id: '{{cid}}',
                       client_secret: '{{cs}}',
                   }});
               gitment.render('gitment-container');
           }
       </script>
   {% endif %}
   
```

ç”±äºæˆ‘å¹¶ä¸æƒ³è¦gitmentè¿™ç©æ„æ‡’åŠ è½½ï¼Œæ‰€ä»¥æŠŠgitmentçš„lazyå­—æ®µè®¾ä¸ºäº†falseï¼Œå¯¹hexoçš„nextä¸»é¢˜è¿˜ä¸ç®—å¤ªäº†è§£ï¼Œç¨å¾®çœ‹äº†ä¸‹æºç ï¼Œå‘ç°å…¶å®æ— è®ºæ‰€å¤„åœ¨é¦–é¡µè¿˜æ˜¯æ–‡ç« é¡µï¼Œéƒ½ä¼šæ‰§è¡Œ`gitment.render('gitment-container');`è¿™ä¸€å¥ï¼Œä½†æˆ‘çš„é¦–é¡µä¸Šå¥½åƒå¹¶ä¸å­˜åœ¨`gitment-container`è¿™ä¸ªdomå…ƒç´ ï¼Œæˆ‘è§‰å¾—æŠ¥é”™å¥½åƒæ˜¯è¿™ä¸ªåŸå› ã€‚

æœºæ™ºçš„æˆ‘logçœ‹äº†ä¸‹ï¼Œæœä¸å…¶ç„¶è¿™ä¸ªå«`gitment-container`çš„ç©æ„åœ¨ä¸»é¡µä¸Šæ˜¯æ²¡æœ‰çš„ï¼Œè‡³äºå®ƒä¸ºä»€ä¹ˆä¼šæ²¡æœ‰ï¼Œæˆ‘å®åœ¨ä¸æƒ³è¿½ç©¶ğŸ˜‚ã€‚ç›´æ¥åŠ äº†ä¸€ä¸ªåˆ¤æ–­

```
          if(document.getElementById("gitment-container"))
          {
           gitment.render('gitment-container');
          }
```

è¿™æ ·å°±okäº†ï¼Œåˆ¤æ–­æ–¹æ³•ç¨å¾®æœ‰ç‚¹ä¸ä¸¥è°¨ï¼Œä¸è¿‡æˆ‘è§‰å¾—è¿˜æ˜¯å¯ä»¥æ¥å—çš„ã€‚